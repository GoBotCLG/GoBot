@model Gobot.Models.LoginViewModel

@{
    ViewBag.Title = "Connection";
    Layout = null;
}

<!DOCTYPE html>

<html>
<head>
    <meta name="viewport" content="width=device-width" />
    <title>@ViewBag.Title - Gobotter</title>
    <link href='https://fonts.googleapis.com/css?family=Lato:400,300,700,900,900italic,300italic,400italic,700italic' rel='stylesheet' type='text/css'>
    <script src="http://ajax.microsoft.com/ajax/jquery/jquery-1.4.2.js" type="text/javascript"></script>
    @Scripts.Render("~/bundles/modernizr")
    @Styles.Render("~/Content/Home.min.css")
</head>
<body>
    <noscript id="error_overlay">
        <div>
            <div id="error_overlay_image"></div>
            <h1>Gobot nécéssite Javascript pour fonctionner corretement. Veuillez l'activer pour pouvoir profiter du contenu de Gobot.com.</h1>
            <a href="http://enable-javascript.com/fr/" target="_blank">Comment activer mon Javascript?</a>
        </div>
    </noscript>
    <div id="header">
        <div id="sub">
            <h1>VOUS N'ÊTES PAS CONNECTÉ.</h1>
            <h2>
                Connectez-vous pour profiter de tout les fonctionnalités de Gobot. Si vous n'avez pas de compte, <a href="@Url.Action("Register", "Account")">créez-le</a>, ça prend moins d'une minute et c'est gratuit!
            </h2>
            <a href="@Url.Action("Register", "Account")">S'INSCRIRE</a>
            <div class="separator">
                <div class="line"></div>
                <div class="diamond"></div>
            </div>
        </div>
        <div id="login">
            @using (Html.BeginForm())
            {
                <div class="left">
                    <div id="username">
                        @Html.LabelFor(model => model.Username)

                        @Html.EditorFor(model => model.Username)
                            @Html.ValidationMessageFor(model => model.Username)
                    </div>
                    <div id="password">
                        @Html.LabelFor(model => model.Password)

                        @Html.EditorFor(model => model.Password)
                        @Html.ValidationMessageFor(model => model.Password)
                    </div>
                </div>
                <div class="right">
                    <div id="signIn_cont">
                        <div id="signIn_circle">
                            <canvas id="canvas"></canvas>
                            <input type=submit value="" />
                        </div>
                        <input id="signIn_rect" type="submit" value="Connexion">
                        <div id="signIn_border"><p></p></div>
                    </div>
                </div>
            }
            <div></div>
        </div>
    </div>

    <div id="main">
        <div class="side ct">
            <img src="~/Images/ct_side.png" />
            <h1>CLOUD6</h1>
            <h2><b class="green">49</b> <img src="~/Images/games_won.png" /> <b class="white">90</b> <img src="~/Images/games_played.png" /></h2>
            <h2></h2>

            <div class="team">
                <div class="names">
                    <span>Albert@{/*@((Newtonsoft.Json.Linq.JObject)ViewBag.LiveStats)[0]["Bot1"]["BotName"].ToObject<string>()*/}</span>
                    <span>Cecil@{/*@((Newtonsoft.Json.Linq.JObject)ViewBag.LiveStats)[0]["Bot2"]["BotName"].ToObject<string>()*/}</span>
                    <span>Elliot@{/*@((Newtonsoft.Json.Linq.JObject)ViewBag.LiveStats)[0]["Bot3"]["BotName"].ToObject<string>()*/}</span>
                    <span>Marvin@{/*@((Newtonsoft.Json.Linq.JObject)ViewBag.LiveStats)[0]["Bot4"]["BotName"].ToObject<string>()*/}</span>
                    <span>Fergus@{/*@((Newtonsoft.Json.Linq.JObject)ViewBag.LiveStats)[0]["Bot5"]["BotName"].ToObject<string>()*/}</span>
                </div>
                <div class="roles">
                    <span>Rifle@{/*@((Newtonsoft.Json.Linq.JObject)ViewBag.LiveStats)[1]["Bot1"]["BotName"].ToObject<string>()*/}</span>
                    <span>Sniper@{/*@((Newtonsoft.Json.Linq.JObject)ViewBag.LiveStats)[1]["Bot2"]["BotName"].ToObject<string>()*/}</span>
                    <span>Rifle@{/*@((Newtonsoft.Json.Linq.JObject)ViewBag.LiveStats)[1]["Bot3"]["BotName"].ToObject<string>()*/}</span>
                    <span>Shotgun@{/*@((Newtonsoft.Json.Linq.JObject)ViewBag.LiveStats)[1]["Bot4"]["BotName"].ToObject<string>()*/}</span>
                    <span>rifle@{/*@((Newtonsoft.Json.Linq.JObject)ViewBag.LiveStats)[1]["Bot5"]["BotName"].ToObject<string>()*/}</span>
                </div>
            </div>
        </div>
        <div id="video">
            <iframe src="https://player.twitch.tv/?channel=gobotts" frameborder="0" scrolling="no" height="378" width="620"></iframe>
        </div>
        <div class="side t">
            <img src="~/Images/t_side.png" />
            <h1>CLOUD6</h1>
            <h2><b class="green">49</b> <img src="~/Images/games_won.png" /> <b class="white">90</b> <img src="~/Images/games_played.png" /></h2>

            <div class="team">
                <div class="names">
                    <span>Albert</span>
                    <span>Cecil</span>
                    <span>Elliot</span>
                    <span>Marvin</span>
                    <span>Fergus</span>
                </div>
                <div class="roles">
                    <span>Rifle</span>
                    <span>Sniper</span>
                    <span>Rifle</span>
                    <span>Shotgun</span>
                    <span>rifle</span>
                </div>
            </div>
        </div>
    </div>


    <script>
        (function () {
            var requestAnimationFrame = window.requestAnimationFrame || window.mozRequestAnimationFrame ||
                                        window.webkitRequestAnimationFrame || window.msRequestAnimationFrame;
            window.requestAnimationFrame = requestAnimationFrame;
        })();

        var canvas = document.getElementById('canvas');
        var context = canvas.getContext('2d');
        context.fillStyle = '#f67763';
        context.lineWidth = 1;
        context.strokeStyle = '#cf513f';
        var x = canvas.width / 2;
        var y = canvas.height / 2;
        var radius = canvas.width / 4;
        var curPerc = 0;
        var circ = Math.PI * 2;
        var quart = Math.PI;
        var lastOver;

        function animate(current) {
            context.clearRect(0, 0, canvas.width, canvas.height);

            context.beginPath();
            context.ellipse(x, y, radius * 2, radius, 0, -(quart), ((circ) * current) - quart);
            context.fill();
            context.stroke();

            var jump = 12;
            curPerc += jump;

            if (curPerc - jump < 100) {
                requestAnimationFrame(function () {
                    animate(curPerc / 100)
                });
            }
        }

        function resetAnimation() {
            curPerc = 0;
            context.clearRect(0, 0, canvas.width, canvas.height);
        }

        $("#signIn_rect, #signIn_circle > input").mouseenter(function () {
            if ($(window).width() > 1600) {
                if (lastOver.attr('id') != "signIn_rect" && lastOver.parent().attr('id') != "signIn_circle")
                    animate();

                lastOver = $(this);
            }
        }).mouseleave(function () {
            if ($(window).width() > 1600) {
                resetAnimation();
            }
        });

        $("#header").not("#signIn_circle > input, #signIn_rect").mouseover(function () {
            lastOver = $(this);
            resetAnimation();
        });

        $(document).ready(function () {
            onResize();
            $(".single-line").removeClass("single-line");
            $(".text-box").removeClass("text-box");
            $("#username > input, #password > input").addClass("type");
        });

        $(window).resize(function () {
            onResize();
        });

        function onResize() {
            $("#main").height($(window).height() - $("#header").height());
            $("#signIn_cont").css("top", $("#header").height() / 2 - $("#signIn_cont").height() / 2);

            if ($(window).width() > 950) {
                // CHECK IF LOGIN FORM EXISTS AND ADD IT IF NOT

                if ($(window).width() <= 1520) {
                    if (!$("#video").is(':first-child'))
                        $("#video").prependTo("#main");

                    $(".side").css("top", 0);
                }
                else {
                    if ($("#video").is(':first-child'))
                        $("#video").insertBefore(".t");

                    $(".side").css("top", $("#main").height() / 2 - $(".side").height() / 2);
                }

                if ($(window).width() <= 1600) {
                    var pos = parseInt(removePx($("#signIn_cont").css("top"))) - $("#username > label").height();
                    $("#username > label, #password > label").css("margin-top", pos);
                }
                else
                    $("#username > label, #password > label").css("margin-top", 24);
            }
            else {
                // REMOVE LOGIN FORM AND ADD OVERLAY LOGIN FORM
            }

            $(".side > img").css("left", $(".side").width() / 2 - $(".side > img").width() / 2);
        }

        function removePx(s) {
            return s.substring(0, s.indexOf('px'));
        }
    </script>
</body>
</html>